<div class="pricing-container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading">
        <i class="fas fa-spinner fa-spin"></i> Loading plans...
    </div>

    <!-- Error State -->
    <div *ngIf="error && !isLoading" class="error">
        <i class="fas fa-exclamation-circle"></i> {{ error }}
    </div>

    <!-- Dynamic Plans -->
    <div *ngFor="let plan of plans; let i = index"
         class="pricing-card"
         [ngClass]="{
             'trial': plan.name.toLowerCase() === 'free trial',
             'free': plan.name.toLowerCase() === 'basic',
             'basic': plan.name.toLowerCase() === 'professional',
             'premium': plan.name.toLowerCase() === 'enterprise'
         }">
        <!-- Popular Badge for Enterprise Plan -->
        <div class="popular-badge" *ngIf="plan.name.toLowerCase() === 'enterprise'">
            MOST POPULAR
        </div>

        <!-- Trial Badge for Free Trial -->
        <div class="trial-badge" *ngIf="plan.name.toLowerCase() === 'free trial'">
            FREE TRIAL
        </div>

        <div class="pricing-header">
            <h3 class="pricing-title">
                <i class="fas"
                   [ngClass]="{
                       'fa-gift': plan.name.toLowerCase() === 'free trial',
                       'fa-star': plan.name.toLowerCase() === 'basic',
                       'fa-shield-alt': plan.name.toLowerCase() === 'professional',
                       'fa-crown': plan.name.toLowerCase() === 'enterprise'
                   }"></i>
                {{ plan.name | uppercase }}
            </h3>
            <div class="pricing-price">${{ plan.price }}</div>
            <div class="pricing-period">per {{ plan.duration_in_days }} days</div>
        </div>

        <div class="pricing-features">
            <div class="feature" *ngFor="let feature of plan.features">
                <i class="fas fa-check-circle"></i>
                <span>{{ feature }}</span>
            </div>
        </div>

        <div class="pricing-footer">
            <button class="select-button"
                    [routerLink]="plan.name.toLowerCase() === 'free trial' ? '/trial/signup' :
                                  plan.name.toLowerCase() === 'basic' ? '/company/statistics' : null">
                {{ plan.name.toLowerCase() === 'free trial' ? 'START FREE TRIAL' :
                   plan.name.toLowerCase() === 'basic' ? 'GET STARTED' :
                   plan.name.toLowerCase() === 'professional' ? 'CHOOSE PLAN' :
                   'GET PREMIUM' }}
            </button>
        </div>
    </div>
</div>