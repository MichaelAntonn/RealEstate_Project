<!-- Main Content -->
<div class="main-content" id="mainContent">
    <div class="container-fluid">

        <!-- Search Box -->
        <div class="search-box">
            <fa-icon [icon]="faSearch"></fa-icon>
            <input type="text" class="form-control" placeholder="Search properties or clients...">
        </div>

        <!-- Stats Cards -->
        <app-stats-cards 
            [listedCount]="listedCount" 
            [bookedCount]="bookedCount" 
            [soldCount]="soldCount"
            [averageRating]="averageRating"
            [givenReviews]="givenReviews"
            [receivedReviews]="receivedReviews">
        </app-stats-cards>

        <!-- charts -->
  <!-- Stats Charts Section -->
<div class="row mt-5" >
    <!-- Dashboard Chart (Left Side) -->
    <div class="col-md-4">
      <app-dashboard-chart 
        [listed]="listedCount" 
        [booked]="bookedCount" 
        [sold]="soldCount">
      </app-dashboard-chart>
    </div>
  
    <!-- Stats Chart (Right Side) -->
    <div class="col-md-8">
      <app-stats-chart
        [listedCount]="listedCount"
        [bookedCount]="bookedCount"
        [soldCount]="soldCount"
        [givenReviews]="givenReviews"
        [receivedReviews]="receivedReviews">
      </app-stats-chart>
    </div>
  </div>




        <!-- Appointments Table -->
        <div class="row mt-5">
            <div class="col-lg-12 mb-4">
                <app-appointments 
                    [appointments]="appointments"
                    (edit)="editAppointment($event)"
                    (delete)="deleteAppointment($event)">
                </app-appointments>
            </div>
        </div>
    </div>
</div>

<!-- Add Appointment Modal -->
<div class="modal fade" id="addAppointmentModal" tabindex="-1" aria-labelledby="addAppointmentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addAppointmentModalLabel">{{ isEditingAppointment ? 'Edit Appointment' : 'Add New Appointment' }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="appointmentDate" class="form-label">Date</label>
                        <input type="date" class="form-control" id="appointmentDate" 
                               [(ngModel)]="currentAppointment.date" name="date" required>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentTime" class="form-label">Time</label>
                        <input type="time" class="form-control" id="appointmentTime" 
                               [(ngModel)]="currentAppointment.time" name="time" required>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentClient" class="form-label">Client Name</label>
                        <input type="text" class="form-control" id="appointmentClient" 
                               [(ngModel)]="currentAppointment.client" name="client" required>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentProperty" class="form-label">Property</label>
                        <select class="form-select" id="appointmentProperty" 
                                [(ngModel)]="currentAppointment.property_id" name="property_id" required>
                            <option *ngFor="let property of properties" [value]="property.id">{{ property.title }}</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentPurpose" class="form-label">Purpose</label>
                        <select class="form-select" id="appointmentPurpose" 
                                [(ngModel)]="currentAppointment.purpose" name="purpose" required>
                            <option value="Property Viewing">Property Viewing</option>
                            <option value="Contract Signing">Contract Signing</option>
                            <option value="Site Tour">Site Tour</option>
                            <option value="Consultation">Consultation</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="appointmentStatus" class="form-label">Status</label>
                        <select class="form-select" id="appointmentStatus" 
                                [(ngModel)]="currentAppointment.status" name="status" required>
                            <option value="Scheduled">Scheduled</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Pending">Pending</option>
                            <option value="Cancelled">Cancelled</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="saveAppointment()" data-bs-dismiss="modal">
                    {{ isEditingAppointment ? 'Update Appointment' : 'Save Appointment' }}
                </button>
            </div>
        </div>
    </div>
</div>